
<% layout("/layouts/boilerplate") %>


<style>
  .tax-toggle{
    border: 1px solid #868686;
    border-radius: 17px;
    height: 38px !important;
    width: 250px;
    padding-top: 7px;
    padding-right: 21px;
    
    font-size: .94rem;
    margin-left: 2.5rem;
    margin-bottom: 1rem;
  }

   #flexSwitchCheckChecked{
    border-color: #222222;
   }

   #flexSwitchCheckChecked:checked{
    background-color: #222222;
    border-color: #222222;
    color: #fff;
   }

  
   .form-switch .form-check-input:focus {
      box-shadow: 0 0 0 0.2rem rgba(34, 34, 34, 0.25); /* Focus color with opacity */
      background-color: #fff;  
      color: #fff;
    }
      
    /* Adjust the color of the switch knob (the small circle) */
   .form-switch .form-check-input:checked::before {
     background-color: #ffffff; /* Color of the knob when checked */
    }


/* ================================================================================================= */


.slider-container {
    position: relative;
    width: 800px;
    height: 85px;
    overflow: hidden;
}

.slider {
    display: flex;
    transition: transform 0.5s ease-in-out;
}

.slide {
    min-width: 1100px;
    height: 85px;
    display: flex;
    justify-content: space-evenly;
    align-items: flex-end;
    font-size: 1.3rem;
    margin-bottom: 15px;
  }

 /* #slide1 {
    background-color: #ff9999;
 } */


 .arrow {
    position: absolute;
    top: 30%;
    transform: translateY(-50%);
    font-size: 1.7rem;
    cursor: pointer;
    z-index: 10;
    opacity: .7;
  }

.left {
    left: 1px;
}
.right {
    right: 0px;
}

.left:hover{
   opacity: 1;
 }
.right:hover{
   opacity: 1;
}

.hidden {
    display: none;
}


.topSlider-tax{
  display: flex;
  align-items: center;
  justify-content: space-between;
}



/*======================= FOR Mobile view ==========================*/
@media (max-width: 1200px) { 
  .form-check-label{
  font-size: .8rem;
  padding:.2rem;
}
}

@media (max-width: 1000px) { 
  .tax-toggle{
    height: 3.5rem;
   }

  .slider-container {
   overflow-x:scroll;
   scrollbar-width: none; /* Hide scrollbar */
  }

  .right {
    display: none;
  }
  .left{
    display: none;
  }

  .tax-toggle{
   height: 50px !important;
   display: flex !important;
   align-items: flex-end !important;
  }
  .form-check-input{
    margin-top: 15px !important;
  }
}


@media (max-width: 769px) { 

      .tax-toggle{
      padding: 0 !important;
      margin: .1rem !important;  
      height: 35px !important;
      width: 145px !important;
      left: 10rem !important;
      display: flex !important;
      flex-direction: row !important; 
      align-items: center !important;
      justify-content: baseline !important;
      
    }

   .form-check-label{
     padding: 0 !important;
     margin-left: 7px !important;
     
     margin-top: 12px !important;
    }

    .tax-toggle-btn{
      margin-bottom:10px !important ;
    }
    .form-check-reverse{
      padding: 0 !important;
    }

/* ICONS  */
  .slider-container{
    width: 740px;
    margin-right: .5rem ;
  }

  .topSlider-tax{
    box-shadow: rgba(17, 17, 26, 0.1) 0px 1px 0px; /* Adjust values as needed */
    margin-bottom: 2rem !important;
  }

}



@media (max-width: 521px) {

  .slider-container {
       width:500px !important;
  }
}

</style>


<body>
    
    <br>
   
<!-- ========================================================================== -->

<div class="topSlider-tax">

  <div class="slider-container">
      <div class="slider">
        <div class="slide" id="slide1">
        
        <div class="filter">
          <div> <i class="fa-solid fa-fire"></i> </div>
          <p id="iconsName">Trending</p>
        </div>

        <div class="filter">
          <div> <i class="fa-solid fa-bed"></i> </div>
          <p id="iconsName">Rooms</p>
        </div>
  
        <div class="filter">
          <div> <i class="fa-solid fa-caravan"></i> </div>
          <p id="iconsName">Camper vans</p>
        </div>

        <div class="filter">
          <div> <i class="fa-solid fa-umbrella-beach"></i> </div>
          <p id="iconsName">Beach</p>
        </div>
  
        <div class="filter">
          <div> <i class="fa-solid fa-person-swimming"></i> </div>
          <p id="iconsName">Amazing pools</p>
        </div>
  
        <div class="filter">
          <div> <i class="fa-solid fa-mountain-city"></i> </div>
          <p id="iconsName">Top cities</p>
        </div>
  
        <div class="filter">
          <div> <i class="fa-solid fa-mug-saucer"></i> </div>
          <p id="iconsName">Bed & breakfast</p>
        </div>

        <div class="filter">
          <div> <i class="fa-solid fa-person-skiing"></i> </div>
          <p id="iconsName">Ski in/out</p>
        </div>
  
        <div class="filter">
          <div> <i class="fa-solid fa-sailboat"></i> </div>
          <p id="iconsName">Boats</p>
        </div>
  
        <div class="filter">
          <div> <i class="fa-regular fa-snowflake"></i>  </div>
          <p id="iconsName">Artic</p>
        </div>

      </div>

  
    </div>
    <i class="fa-solid fa-circle-chevron-left arrow left" id="leftArrow"></i>
    <i class="fa-solid fa-circle-chevron-right arrow right" id="rightArrow"></i>
  </div>

  <!-- ====================================   TAX BUTTON    =================================== -->

    <div class="tax-toggle">
        <div class="form-check-reverse form-switch">
        <div> <input class="form-check-input tax-toggle-btn" type="checkbox" role="switch" id="flexSwitchCheckChecked" > </div> 
        <div> <label class="form-check-label " for="flexSwitchCheckChecked">Display total after taxes</label> </div>
        </div>
   </div>
</div>





 <!-- Card template using bootstrape   -->

    <div class="row row-cols-lg-3  row-cols-md-2  row-cols-sm-1" >  <!--bootStrap custom class to  make responsive cards -->

        <%for( let list of allListing){%>

         <a href="/listing/<%=list._id %>"  class="listing-link">   <!--whenever we click a card its act as an ancour tag -->

          <div class="card col listing-card" >
            <img src="<%= list.image.url %>" class="card-img-top" alt="img" style="height: 17rem; ">  <!-- here in the image tage the hight is the game changer [set image properly]-->
            <div class="card-img-overlay"> <%= list.location %></div>   <!-- bootstrap class, to wtite over the image-->

            <div class="card-body">
               <h6 class="card-title"> <b> <%= list.title %> </b></h6>
              
              <h6 style="display: inline-block;">&#8377;<%= list.price.toLocaleString("en-IN")%> / night</h6>
              <i class="taxInfo" style="display: none;"> &nbsp; &nbsp; + 18% GST</i>
            </div>
          </div>

          </a>
        <%}%>

    </div>

</body>




<script>

    let taxInfo = document.getElementsByClassName("taxInfo");
    console.log(taxInfo);

    let taxSwitch = document.getElementById("flexSwitchCheckChecked");
    taxSwitch.addEventListener("click",()=>{

      for(info of taxInfo){

        if(info.style.display == "inline"){
           info.style.display= "none";
        }else{
          info.style.display= "inline";
        }
       
      }
      
    });



// ///////////////////////////////////////////////////////////////////////////////////////////////////
document.addEventListener('DOMContentLoaded', () => {
    const leftArrow = document.getElementById('leftArrow');
    const rightArrow = document.getElementById('rightArrow');
    const slider = document.querySelector('.slider');
    
    let currentSlide = 0;

    function updateButtons() {
        if (currentSlide === 0) {
            leftArrow.classList.add('hidden');
            rightArrow.classList.remove('hidden');
        } else if (currentSlide === 1) {
            leftArrow.classList.remove('hidden');
            rightArrow.classList.add('hidden');
        }
    }

    leftArrow.addEventListener('click', () => {
        if (currentSlide > 0) {
            currentSlide--;
            slider.style.transform = `translateX(-${currentSlide * 300}px)`;
            updateButtons();
        }
    });

    rightArrow.addEventListener('click', () => {
        if (currentSlide < 1) {
            currentSlide++;
            slider.style.transform = `translateX(-${currentSlide * 300}px)`;
            updateButtons();
        }
    });

    // Initialize button visibility
    updateButtons();
});



//update tax text 

function updateLabelText() {
            const label = document.querySelector('.form-check-label');
            if (window.innerWidth < 771) {
                label.textContent = 'GST';
            } else {
                label.textContent = 'Display total after taxes';
            }
        }

        // Initial check
        updateLabelText();

        // Update label text on window resize
        window.addEventListener('resize', updateLabelText);

</script>


